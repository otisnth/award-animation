<template>
  <AnimationBase
    animationClass="firework"
    :createContent="createFireworkContent"
    :intervalRange="[600, 800]"
    :duration="2000"
  >
    <slot />
  </AnimationBase>
</template>

<script setup lang="ts">
import AnimationBase from "./AnimationBase.vue";

const getSize = () => Math.random() * 40 + 10;

const colors = [
  "#ff0000",
  "#ff00dd",
  "#b700ff",
  "#ff00aa",
  "#ff5599",
  "#ff7777",
  "#ffff00",
  "#00ff00",
  "#00ffff",
  "#0000ff",
  "#ff00ff",
  "#ffffff",
  "#ffa500",
  "#ff1493",
];

const getColor = () => colors[Math.floor(Math.random() * colors.length)];

const createFireworkContent = () => `
  <svg
      style="
      width: ${getSize()}px;
      height: ${getSize()}px;
    "
  " height="800px" width="800px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512.006 512.006" xml:space="preserve">
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M457.663,439.592l-23.441-23.475c-5.001-5.001-13.099-5.001-18.099,0c-5.001,4.983-5.001,13.099,0,18.099l23.45,23.475
			c2.5,2.5,5.777,3.746,9.045,3.746s6.554-1.246,9.045-3.746C462.663,452.708,462.663,444.593,457.663,439.592z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M178.648,160.552L55.188,37.092c-5.001-5.001-13.099-5.001-18.099,0s-5.001,13.099,0,18.099l123.469,123.46
			c2.5,2.5,5.777,3.746,9.045,3.746c3.277,0,6.554-1.246,9.045-3.746C183.649,173.651,183.649,165.553,178.648,160.552z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M476.521,301.838l-75.597-20.267c-6.852-1.809-13.85,2.21-15.701,9.054c-1.826,6.827,2.227,13.85,9.045,15.676
			l75.597,20.267c1.126,0.299,2.227,0.435,3.328,0.435c5.649,0,10.82-3.763,12.373-9.489
			C487.393,310.696,483.339,303.665,476.521,301.838z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M60.786,190.436l-44.672-11.964c-6.699-1.801-13.824,2.236-15.676,9.054c-1.826,6.827,2.227,13.85,9.071,15.676
			l44.672,11.964c1.109,0.299,2.21,0.435,3.302,0.435c5.649,0,10.82-3.772,12.373-9.489
			C71.683,199.285,67.63,192.262,60.786,190.436z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M511.568,187.526c-1.852-6.835-8.747-10.871-15.701-9.054l-197.018,52.787l56.073-56.081c5-5.001,5-13.099,0-18.099
			c-5.001-5.001-13.099-5.001-18.099,0l-56.09,56.09l29.193-108.945c1.826-6.827-2.227-13.85-9.045-15.676
			c-6.903-1.784-13.824,2.227-15.701,9.054l-29.175,108.911l-16.649-62.106c-1.852-6.852-8.747-10.846-15.701-9.054
			c-6.827,1.826-10.871,8.849-9.045,15.676l16.649,62.14l-17.357-17.357c-5.001-5-13.099-5-18.099,0
			c-5.001,5.001-5.001,13.099,0,18.099l17.348,17.348L96.43,199.984c-6.878-1.835-13.85,2.236-15.701,9.054
			c-1.826,6.827,2.227,13.85,9.045,15.676l116.762,31.283l-62.336,16.7c-6.827,1.826-10.872,8.849-9.045,15.676
			c1.553,5.726,6.724,9.489,12.373,9.489c1.101,0,2.202-0.137,3.328-0.435l62.336-16.7L67.237,426.69
			c-5.001,5.001-5.001,13.099,0,18.099c2.5,2.5,5.777,3.746,9.045,3.746s6.554-1.246,9.045-3.746l145.92-145.929l-20.821,77.73
			c-1.826,6.827,2.227,13.85,9.045,15.676c1.126,0.299,2.227,0.435,3.328,0.435c5.649,0,10.82-3.763,12.373-9.489l20.83-77.722
			l4.847,18.091c1.553,5.726,6.724,9.489,12.373,9.489c1.101,0,2.202-0.136,3.328-0.435c6.827-1.826,10.871-8.849,9.045-15.676
			l-4.847-18.108l106.47,106.462c2.5,2.5,5.777,3.746,9.045,3.746c3.277,0,6.554-1.246,9.045-3.746c5.001-5,5.001-13.099,0-18.099
			L298.815,280.727l53.376,14.302c1.126,0.299,2.227,0.435,3.328,0.435c5.649,0,10.82-3.772,12.373-9.489
			c1.826-6.827-2.227-13.85-9.045-15.676l-53.376-14.302l197.043-52.796C509.341,201.375,513.394,194.353,511.568,187.526z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M117.934,293.006c-1.852-6.835-8.9-10.871-15.676-9.054l-72.747,19.49c-6.852,1.826-10.897,8.849-9.071,15.676
			c1.553,5.726,6.724,9.489,12.373,9.489c1.101,0,2.202-0.137,3.302-0.435l72.747-19.49
			C115.706,306.856,119.76,299.833,117.934,293.006z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M456.459,55.515c-5-5.001-13.099-5.001-18.099,0l-67.994,68.002c-5,5.001-5,13.099,0,18.099
			c2.509,2.5,5.777,3.746,9.054,3.746s6.554-1.246,9.045-3.746l67.994-68.002C461.46,68.614,461.46,60.516,456.459,55.515z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M322.921,6.329c-6.844-1.775-13.85,2.227-15.667,9.037l-3.601,13.372c-1.852,6.827,2.202,13.85,9.02,15.693
			c1.126,0.299,2.227,0.435,3.328,0.435c5.649,0,10.82-3.763,12.348-9.472l3.601-13.38C333.801,15.187,329.748,8.164,322.921,6.329z
			"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M213.601,414.342c-6.852-1.8-13.824,2.21-15.701,9.054l-19.447,72.499c-1.826,6.827,2.227,13.841,9.045,15.676
			c1.135,0.299,2.236,0.435,3.337,0.435c5.649,0,10.82-3.763,12.373-9.489l19.447-72.499
			C224.481,423.191,220.427,416.177,213.601,414.342z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M229.626,108.106l-26.419-98.62c-1.852-6.835-8.798-10.863-15.701-9.054c-6.827,1.826-10.871,8.849-9.045,15.676
			l26.419,98.62c1.553,5.726,6.724,9.489,12.373,9.489c1.101,0,2.202-0.137,3.328-0.435
			C227.408,121.956,231.453,114.933,229.626,108.106z"/>
	</g>
</g>
<g>
	<g>
		<path fill="${getColor()}" stroke-width="1" d="M325.899,467.368l-29.798-111.241c-1.852-6.835-8.9-10.871-15.676-9.054c-6.852,1.826-10.897,8.849-9.071,15.676
			l29.798,111.241c1.553,5.726,6.724,9.489,12.373,9.489c1.101,0,2.202-0.136,3.302-0.435
			C323.681,481.218,327.726,474.195,325.899,467.368z"/>
	</g>
</g>
</svg>
`;
</script>

<style scoped>
:deep(.firework) {
  position: absolute;
  pointer-events: none;
  animation: firework-explode 2s ease-out forwards;
}

@keyframes firework-explode {
  0% {
    transform: scale(0.5);
    opacity: 1;
  }
  50% {
    transform: scale(1.5);
    opacity: 1;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}
</style>
